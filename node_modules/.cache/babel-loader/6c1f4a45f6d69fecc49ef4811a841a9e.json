{"ast":null,"code":"import _regeneratorRuntime from\"/Users/annasun/Desktop/IH-MAY-2021/Assignment/rick_and_morty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/annasun/Desktop/IH-MAY-2021/Assignment/rick_and_morty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/annasun/Desktop/IH-MAY-2021/Assignment/rick_and_morty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Dropdownmenu from\"./DropdownMenu/DropDown\";import DropdownItem from\"./DropdownMenu/DropdownItem\";import axios from\"axios\";import Backdrop from\"./Backdrop/Backdrop\";import{API_URL}from\"../config\";import\"bootstrap/dist/css/bootstrap.min.css\";import SingleCharater from\"./singleCharater\";import logo from\"../img/Rick_and_Morty_logo.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Character(){//jest\n//too many useState\n//all characters render info\nvar _useState=useState({totalPage:\"\",totalCharacter:\"\",character:\"\"}),_useState2=_slicedToArray(_useState,2),basic=_useState2[0],setBasic=_useState2[1];//setting page , for url\nvar _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),APIpage=_useState4[0],setAPIPage=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),characterNo=_useState6[0],setCharacterNo=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),pageNoArr=_useState8[0],setPageNoArr=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),date=_useState10[0],setDate=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),serachItem=_useState12[0],setSeachItem=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),searchOther=_useState14[0],setSearchOther=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),findNothing=_useState16[0],setfindNothing=_useState16[1];//for showing single character info\nvar _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showDetail=_useState18[0],setShowDetail=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),n=_useState20[0],setn=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),open=_useState22[0],setOpen=_useState22[1];var _useState23=useState(1),_useState24=_slicedToArray(_useState23,2),pageNo=_useState24[0],setPageNo=_useState24[1];useEffect(function(){function getcharacter(){return _getcharacter.apply(this,arguments);}function _getcharacter(){_getcharacter=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var dataArray,response,searchValue,searchValue1,searchValue2,test,page,totalPage,_response,_totalPage,i,_test,responseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dataArray=[];_context.next=3;return axios.get(\"\".concat(API_URL,\"/character/?page=\").concat(APIpage));case 3:response=_context.sent;if(!serachItem){_context.next=49;break;}if(!searchOther){_context.next=33;break;}searchValue=serachItem[\"species\"];searchValue1=serachItem[\"status\"];searchValue2=serachItem[\"name\"];_context.prev=9;_context.next=12;return axios.get(\"\".concat(API_URL,\"/character/?page=\").concat(APIpage,\"&status=\").concat(searchValue1,\"&species=\").concat(searchValue,\"&name=\").concat(searchValue2));case 12:response=_context.sent;_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](9);setfindNothing(\"No Character found\");case 18:if(!date){_context.next=31;break;}test=[];page=1;totalPage=response.data.info.pages;case 22:if(!(page<=totalPage)){_context.next=30;break;}_context.next=25;return axios.get(\"\".concat(API_URL,\"/character/?page=\").concat(page,\"&status=\").concat(searchValue1,\"&species=\").concat(searchValue,\"&name=\").concat(searchValue2));case 25:response=_context.sent;page++;test.push(response.data.results.filter(function(elem){return serachItem[\"startDate\"]<=elem.created&&elem.created<=serachItem[\"endDate\"];}));_context.next=22;break;case 30:dataArray=test.flat();case 31:_context.next=49;break;case 33:if(!date){_context.next=49;break;}_context.next=36;return axios.get(\"\".concat(API_URL,\"/character/?page=\").concat(APIpage));case 36:_response=_context.sent;_totalPage=_response.data.info.pages;i=1;_test=[];case 40:if(!(_totalPage>=i)){_context.next=48;break;}_context.next=43;return axios.get(\"\".concat(API_URL,\"/character/?page=\").concat(i));case 43:responseData=_context.sent;i++;_test.push(responseData.data.results.filter(function(elem){return serachItem[\"startDate\"]<=elem.created&&elem.created<=serachItem[\"endDate\"];}));_context.next=40;break;case 48:dataArray=_test.flat();case 49:pageNo(response.data.info.count);setBasic({totalCharacter:response.data.info.count,character:response.data.results,totalPage:response.data.info.pages});if(date){if(dataArray.length===0){setfindNothing(\"Find no informaion\");}setBasic({totalCharacter:dataArray.length,character:dataArray});pageNo(dataArray.length);}case 52:case\"end\":return _context.stop();}}},_callee,null,[[9,15]]);}));return _getcharacter.apply(this,arguments);}var pageNo=function pageNo(totalCharacter){var totalPage=0;totalCharacter%10===0?totalPage=totalCharacter/10:totalPage=totalCharacter/10+1;var pageArr=[];for(var i=1;i<=totalPage;i++){pageArr.push(i);}setPageNoArr(pageArr);};getcharacter();},[serachItem,APIpage,date,searchOther]);//function for searching\nvar handleSearch=function handleSearch(event){event.preventDefault();setfindNothing(null);setAPIPage(1);setPageNo(1);forSetAPI(event,1);var _event$target=event.target,species=_event$target.species,name=_event$target.name,status=_event$target.status,startDate=_event$target.startDate,endDate=_event$target.endDate;if(startDate.value,endDate.value){setDate(true);}if(species.value||species.value||name.value){setSearchOther(true);}else if(!startDate.value,!endDate.value){setDate(false);}setSeachItem({species:species.value,name:name.value,status:status.value,startDate:startDate.value,endDate:endDate.value});};//function for handling singlecharacter info\nvar hanldDetails=function hanldDetails(e,number,show){e.preventDefault();if(show===\"close\"){setShowDetail(false);}else{setCharacterNo(number);setShowDetail(true);}};//function for page drop down menu to set APIpage\nvar forSetAPI=function forSetAPI(e,elem){e.preventDefault();if(!date){elem%2===0?setAPIPage(elem/2):setAPIPage(Math.ceil(elem/2));}pageHelper(elem);};//function handling page selector\nvar pageHelper=function pageHelper(elem){setPageNo(elem);if(date){setn(elem*10-10,elem*10);}else{if(elem%2===0){setn(10);}else{setn(0);}}};//clear for info\nvar handleClear=function handleClear(event){event.preventDefault();Array.from(document.querySelectorAll(\"input\")).forEach(function(input){return input.value=\"\";});setDate(false);};//handle page selector opening\nvar forOpen=function forOpen(){setOpen(!open);};return/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"rick and morty\"}),/*#__PURE__*/_jsx(DropdownItem,{onOpen:forOpen,open:open,pageNo:pageNo,children:/*#__PURE__*/_jsx(Dropdownmenu,{props:pageNoArr,onShow:forSetAPI,onOpen:forOpen})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Species\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Filter Species\",name:\"species\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Filter Name\",name:\"name\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Filter Status\",name:\"status\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Created Date: From \"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Filter Status\",name:\"startDate\",type:\"date\"}),\"to\",/*#__PURE__*/_jsx(\"input\",{placeholder:\"Filter Status\",name:\"endDate\",type:\"date\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleClear,children:\"Clear\"})]}),/*#__PURE__*/_jsx(\"span\",{children:findNothing&&/*#__PURE__*/_jsx(\"span\",{children:findNothing})}),!findNothing&&/*#__PURE__*/_jsx(\"div\",{className:\"character_container\",children:basic.character&&basic.character.slice(n,n+10).map(function(element,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"item\",onClick:function onClick(e){hanldDetails(e,element.id,\"open\");},children:[/*#__PURE__*/_jsx(\"img\",{src:element.image,alt:\"img\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:element.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:element.species}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:element.status}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:element.created.slice(0,10)}),/*#__PURE__*/_jsx(\"br\",{})]},index)});})}),showDetail&&/*#__PURE__*/_jsx(Backdrop,{}),showDetail&&/*#__PURE__*/_jsx(SingleCharater,{characterNo:characterNo,onHandleDetails:hanldDetails}),\" \"]});}export default Character;","map":{"version":3,"sources":["/Users/annasun/Desktop/IH-MAY-2021/Assignment/rick_and_morty/src/Component/character.js"],"names":["React","useState","useEffect","Dropdownmenu","DropdownItem","axios","Backdrop","API_URL","SingleCharater","logo","Character","totalPage","totalCharacter","character","basic","setBasic","APIpage","setAPIPage","characterNo","setCharacterNo","pageNoArr","setPageNoArr","date","setDate","serachItem","setSeachItem","searchOther","setSearchOther","findNothing","setfindNothing","showDetail","setShowDetail","n","setn","open","setOpen","pageNo","setPageNo","getcharacter","dataArray","get","response","searchValue","searchValue1","searchValue2","test","page","data","info","pages","push","results","filter","elem","created","flat","i","responseData","count","length","pageArr","handleSearch","event","preventDefault","forSetAPI","target","species","name","status","startDate","endDate","value","hanldDetails","e","number","show","Math","ceil","pageHelper","handleClear","Array","from","document","querySelectorAll","forEach","input","forOpen","slice","map","element","index","id","image"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Dropdownmenu from \"./DropdownMenu/DropDown\";\nimport DropdownItem from \"./DropdownMenu/DropdownItem\";\nimport axios from \"axios\";\nimport Backdrop from \"./Backdrop/Backdrop\";\nimport { API_URL } from \"../config\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport SingleCharater from \"./singleCharater\";\nimport logo from \"../img/Rick_and_Morty_logo.png\";\n\nfunction Character() {\n  //jest\n  //too many useState\n\n  //all characters render info\n  let [basic, setBasic] = useState({\n    totalPage: \"\",\n    totalCharacter: \"\",\n    character: \"\",\n  });\n\n  //setting page , for url\n  let [APIpage, setAPIPage] = useState(1);\n  const [characterNo, setCharacterNo] = useState(null);\n\n  const [pageNoArr, setPageNoArr] = useState([]);\n  const [date, setDate] = useState(false);\n\n  let [serachItem, setSeachItem] = useState(null);\n  const [searchOther, setSearchOther] = useState(false);\n  const [findNothing, setfindNothing] = useState(null);\n\n  //for showing single character info\n  const [showDetail, setShowDetail] = useState(false);\n\n  let [n, setn] = useState(0);\n\n  const [open, setOpen] = useState(false);\n  const [pageNo, setPageNo] = useState(1);\n\n  useEffect(() => {\n    async function getcharacter() {\n      let dataArray = [];\n\n      let response = await axios.get(`${API_URL}/character/?page=${APIpage}`);\n\n      if (serachItem) {\n        if (searchOther) {\n          let searchValue = serachItem[\"species\"];\n          let searchValue1 = serachItem[\"status\"];\n          let searchValue2 = serachItem[\"name\"];\n          try {\n            response = await axios.get(\n              `${API_URL}/character/?page=${APIpage}&status=${searchValue1}&species=${searchValue}&name=${searchValue2}`\n            );\n          } catch (err) {\n            setfindNothing(\"No Character found\");\n          }\n\n          if (date) {\n            let test = [];\n            let page = 1;\n            let totalPage = response.data.info.pages;\n            while (page <= totalPage) {\n              response = await axios.get(\n                `${API_URL}/character/?page=${page}&status=${searchValue1}&species=${searchValue}&name=${searchValue2}`\n              );\n              page++;\n\n              test.push(\n                response.data.results.filter((elem) => {\n                  return (\n                    serachItem[\"startDate\"] <= elem.created &&\n                    elem.created <= serachItem[\"endDate\"]\n                  );\n                })\n              );\n            }\n\n            dataArray = test.flat();\n          }\n        } else if (date) {\n          let response = await axios.get(\n            `${API_URL}/character/?page=${APIpage}`\n          );\n\n          let totalPage = response.data.info.pages;\n          let i = 1;\n          let test = [];\n\n          while (totalPage >= i) {\n            let responseData = await axios.get(\n              `${API_URL}/character/?page=${i}`\n            );\n            i++;\n\n            test.push(\n              responseData.data.results.filter((elem) => {\n                return (\n                  serachItem[\"startDate\"] <= elem.created &&\n                  elem.created <= serachItem[\"endDate\"]\n                );\n              })\n            );\n          }\n          dataArray = test.flat();\n        }\n      }\n\n      pageNo(response.data.info.count);\n      setBasic({\n        totalCharacter: response.data.info.count,\n        character: response.data.results,\n        totalPage: response.data.info.pages,\n      });\n\n      if (date) {\n        if (dataArray.length === 0) {\n          setfindNothing(\"Find no informaion\");\n        }\n\n        setBasic({\n          totalCharacter: dataArray.length,\n          character: dataArray,\n        });\n\n        pageNo(dataArray.length);\n      }\n    }\n\n    const pageNo = (totalCharacter) => {\n      let totalPage = 0;\n      totalCharacter % 10 === 0\n        ? (totalPage = totalCharacter / 10)\n        : (totalPage = totalCharacter / 10 + 1);\n\n      const pageArr = [];\n      for (let i = 1; i <= totalPage; i++) {\n        pageArr.push(i);\n      }\n\n      setPageNoArr(pageArr);\n    };\n\n    getcharacter();\n  }, [serachItem, APIpage, date, searchOther]);\n\n  //function for searching\n  const handleSearch = (event) => {\n    event.preventDefault();\n    setfindNothing(null);\n    setAPIPage(1);\n    setPageNo(1);\n    forSetAPI(event, 1);\n\n    const { species, name, status, startDate, endDate } = event.target;\n    if ((startDate.value, endDate.value)) {\n      setDate(true);\n    }\n    if (species.value || species.value || name.value) {\n      setSearchOther(true);\n    } else if ((!startDate.value, !endDate.value)) {\n      setDate(false);\n    }\n\n    setSeachItem({\n      species: species.value,\n      name: name.value,\n      status: status.value,\n      startDate: startDate.value,\n      endDate: endDate.value,\n    });\n  };\n\n  //function for handling singlecharacter info\n  const hanldDetails = (e, number, show) => {\n    e.preventDefault();\n\n    if (show === \"close\") {\n      setShowDetail(false);\n    } else {\n      setCharacterNo(number);\n      setShowDetail(true);\n    }\n  };\n\n  //function for page drop down menu to set APIpage\n  const forSetAPI = (e, elem) => {\n    e.preventDefault();\n    if (!date) {\n      elem % 2 === 0 ? setAPIPage(elem / 2) : setAPIPage(Math.ceil(elem / 2));\n    }\n    pageHelper(elem);\n  };\n  //function handling page selector\n  const pageHelper = (elem) => {\n    setPageNo(elem);\n    if (date) {\n      setn(elem * 10 - 10, elem * 10);\n    } else {\n      if (elem % 2 === 0) {\n        setn(10);\n      } else {\n        setn(0);\n      }\n    }\n  };\n  //clear for info\n  const handleClear = (event) => {\n    event.preventDefault();\n    Array.from(document.querySelectorAll(\"input\")).forEach(\n      (input) => (input.value = \"\")\n    );\n    setDate(false);\n  };\n\n  //handle page selector opening\n  const forOpen = () => {\n    setOpen(!open);\n  };\n\n  return (\n    <div className=\"box\">\n      <img src={logo} alt=\"rick and morty\" />\n      <DropdownItem onOpen={forOpen} open={open} pageNo={pageNo}>\n        <Dropdownmenu props={pageNoArr} onShow={forSetAPI} onOpen={forOpen} />\n      </DropdownItem>\n      <form onSubmit={handleSearch}>\n        <label>Species</label>\n        <input placeholder=\"Filter Species\" name=\"species\" />\n        <label>Name</label>\n        <input placeholder=\"Filter Name\" name=\"name\" />\n        <label>Status</label>\n        <input placeholder=\"Filter Status\" name=\"status\" />\n        <br />\n        <label>Created Date: From </label>\n        <input placeholder=\"Filter Status\" name=\"startDate\" type=\"date\" />\n        to\n        <input placeholder=\"Filter Status\" name=\"endDate\" type=\"date\" />\n        <button type=\"submit\">Submit</button>\n        <button type=\"button\" onClick={handleClear}>\n          Clear\n        </button>\n      </form>\n      <span>{findNothing && <span>{findNothing}</span>}</span>\n      {!findNothing && (\n        <div className=\"character_container\">\n          {basic.character &&\n            basic.character.slice(n, n + 10).map((element, index) => (\n              <>\n                <div\n                  key={index}\n                  className=\"item\"\n                  onClick={(e) => {\n                    hanldDetails(e, element.id, \"open\");\n                  }}\n                >\n                  <img src={element.image} alt=\"img\" />\n                  <br />\n                  <span>{element.name}</span>\n                  <br />\n                  <span>{element.species}</span>\n                  <br />\n                  <span>{element.status}</span>\n                  <br />\n                  <span>{element.created.slice(0, 10)}</span>\n                  <br />\n                </div>\n              </>\n            ))}\n        </div>\n      )}\n      {showDetail && <Backdrop />}\n      {showDetail && (\n        <SingleCharater\n          characterNo={characterNo}\n          onHandleDetails={hanldDetails}\n        />\n      )}{\" \"}\n    </div>\n  );\n}\nexport default Character;\n"]},"metadata":{},"sourceType":"module"}