{"ast":null,"code":"import _regeneratorRuntime from\"/Users/annasun/Desktop/IH-MAY-2021/Assignment/rick_and_morty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/annasun/Desktop/IH-MAY-2021/Assignment/rick_and_morty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/annasun/Desktop/IH-MAY-2021/Assignment/rick_and_morty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{API_URL}from\"../../config\";var useFetch=function useFetch(serachItem,searchOther,date,APIpage){var _useState=useState({totalPage:\"\",totalCharacter:\"\",character:\"\"}),_useState2=_slicedToArray(_useState,2),basic=_useState2[0],setBasic=_useState2[1];//setting page , for url\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),pageNoArr=_useState4[0],setPageNoArr=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),findNothing=_useState6[0],setfindNothing=_useState6[1];useEffect(function(){setfindNothing(null);function getcharacter(){return _getcharacter.apply(this,arguments);}function _getcharacter(){_getcharacter=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var dataArray,response,searchValue,searchValue1,searchValue2,test,page,totalPage,_response,_totalPage,i,_test,responseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dataArray=[];_context.next=3;return axios.get(\"\".concat(API_URL,\"/character/?page=\").concat(APIpage));case 3:response=_context.sent;if(!serachItem){_context.next=49;break;}if(!searchOther){_context.next=33;break;}searchValue=serachItem[\"species\"];searchValue1=serachItem[\"status\"];searchValue2=serachItem[\"name\"];_context.prev=9;_context.next=12;return axios.get(\"\".concat(API_URL,\"/character/?page=\").concat(APIpage,\"&status=\").concat(searchValue1,\"&species=\").concat(searchValue,\"&name=\").concat(searchValue2));case 12:response=_context.sent;_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](9);setfindNothing(\"No Character found\");case 18:if(!date){_context.next=31;break;}test=[];page=1;totalPage=response.data.info.pages;case 22:if(!(page<=totalPage)){_context.next=30;break;}_context.next=25;return axios.get(\"\".concat(API_URL,\"/character/?page=\").concat(page,\"&status=\").concat(searchValue1,\"&species=\").concat(searchValue,\"&name=\").concat(searchValue2));case 25:response=_context.sent;page++;test.push(response.data.results.filter(function(elem){return serachItem[\"startDate\"]<=elem.created&&elem.created<=serachItem[\"endDate\"];}));_context.next=22;break;case 30:dataArray=test.flat();case 31:_context.next=49;break;case 33:if(!date){_context.next=49;break;}_context.next=36;return axios.get(\"\".concat(API_URL,\"/character/?page=\").concat(APIpage));case 36:_response=_context.sent;_totalPage=_response.data.info.pages;i=1;_test=[];case 40:if(!(_totalPage>=i)){_context.next=48;break;}_context.next=43;return axios.get(\"\".concat(API_URL,\"/character/?page=\").concat(i));case 43:responseData=_context.sent;i++;_test.push(responseData.data.results.filter(function(elem){return serachItem[\"startDate\"]<=elem.created&&elem.created<=serachItem[\"endDate\"];}));_context.next=40;break;case 48:dataArray=_test.flat();case 49:pageNo(response.data.info.count);setBasic({totalCharacter:response.data.info.count,character:response.data.results,totalPage:response.data.info.pages});if(date){if(dataArray.length===0){setfindNothing(\"Find no informaion\");}setBasic({totalCharacter:dataArray.length,character:dataArray});pageNo(dataArray.length);}case 52:case\"end\":return _context.stop();}}},_callee,null,[[9,15]]);}));return _getcharacter.apply(this,arguments);}var pageNo=function pageNo(totalCharacter){var totalPage=0;totalCharacter%10===0?totalPage=totalCharacter/10:totalPage=totalCharacter/10+1;var pageArr=[];for(var i=1;i<=totalPage;i++){pageArr.push(i);}setPageNoArr(pageArr);};getcharacter();},[serachItem,APIpage,date,searchOther]);return{basic:basic,pageNoArr:pageNoArr,findNothing:findNothing};};export default useFetch;","map":{"version":3,"sources":["/Users/annasun/Desktop/IH-MAY-2021/Assignment/rick_and_morty/src/Component/Character/useFetch.js"],"names":["useState","useEffect","axios","API_URL","useFetch","serachItem","searchOther","date","APIpage","totalPage","totalCharacter","character","basic","setBasic","pageNoArr","setPageNoArr","findNothing","setfindNothing","getcharacter","dataArray","get","response","searchValue","searchValue1","searchValue2","test","page","data","info","pages","push","results","filter","elem","created","flat","i","responseData","pageNo","count","length","pageArr"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { API_URL } from \"../../config\";\n\nconst useFetch = (serachItem, searchOther, date, APIpage) => {\n  let [basic, setBasic] = useState({\n    totalPage: \"\",\n    totalCharacter: \"\",\n    character: \"\",\n  });\n  //setting page , for url\n  const [pageNoArr, setPageNoArr] = useState([]);\n  const [findNothing, setfindNothing] = useState(null);\n\n  useEffect(() => {\n    setfindNothing(null);\n    async function getcharacter() {\n      let dataArray = [];\n\n      let response = await axios.get(`${API_URL}/character/?page=${APIpage}`);\n\n      if (serachItem) {\n        if (searchOther) {\n          let searchValue = serachItem[\"species\"];\n          let searchValue1 = serachItem[\"status\"];\n          let searchValue2 = serachItem[\"name\"];\n          try {\n            response = await axios.get(\n              `${API_URL}/character/?page=${APIpage}&status=${searchValue1}&species=${searchValue}&name=${searchValue2}`\n            );\n          } catch (err) {\n            setfindNothing(\"No Character found\");\n          }\n\n          if (date) {\n            let test = [];\n            let page = 1;\n            let totalPage = response.data.info.pages;\n            while (page <= totalPage) {\n              response = await axios.get(\n                `${API_URL}/character/?page=${page}&status=${searchValue1}&species=${searchValue}&name=${searchValue2}`\n              );\n              page++;\n\n              test.push(\n                response.data.results.filter((elem) => {\n                  return (\n                    serachItem[\"startDate\"] <= elem.created &&\n                    elem.created <= serachItem[\"endDate\"]\n                  );\n                })\n              );\n            }\n\n            dataArray = test.flat();\n          }\n        } else if (date) {\n          let response = await axios.get(\n            `${API_URL}/character/?page=${APIpage}`\n          );\n\n          let totalPage = response.data.info.pages;\n          let i = 1;\n          let test = [];\n\n          while (totalPage >= i) {\n            let responseData = await axios.get(\n              `${API_URL}/character/?page=${i}`\n            );\n            i++;\n\n            test.push(\n              responseData.data.results.filter((elem) => {\n                return (\n                  serachItem[\"startDate\"] <= elem.created &&\n                  elem.created <= serachItem[\"endDate\"]\n                );\n              })\n            );\n          }\n          dataArray = test.flat();\n        }\n      }\n\n      pageNo(response.data.info.count);\n      setBasic({\n        totalCharacter: response.data.info.count,\n        character: response.data.results,\n        totalPage: response.data.info.pages,\n      });\n\n      if (date) {\n        if (dataArray.length === 0) {\n          setfindNothing(\"Find no informaion\");\n        }\n\n        setBasic({\n          totalCharacter: dataArray.length,\n          character: dataArray,\n        });\n\n        pageNo(dataArray.length);\n      }\n    }\n\n    const pageNo = (totalCharacter) => {\n      let totalPage = 0;\n      totalCharacter % 10 === 0\n        ? (totalPage = totalCharacter / 10)\n        : (totalPage = totalCharacter / 10 + 1);\n\n      const pageArr = [];\n      for (let i = 1; i <= totalPage; i++) {\n        pageArr.push(i);\n      }\n\n      setPageNoArr(pageArr);\n    };\n\n    getcharacter();\n  }, [serachItem, APIpage, date, searchOther]);\n\n  return { basic, pageNoArr, findNothing };\n};\n\nexport default useFetch;\n"]},"metadata":{},"sourceType":"module"}